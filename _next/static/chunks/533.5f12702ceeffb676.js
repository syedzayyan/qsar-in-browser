(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{714:function(t,e,r){"use strict";let s;r.r(e),r.d(e,{default:function(){return FPGen}});var n=r(5893),o=r(7294),a=r(1315),l=r(2138);r(6486);var i=r(6213),c=r.n(i);let initRDKit=()=>(s||(s=new Promise((t,e)=>{c()().then(e=>{t(e)}).catch(t=>{console.log(t)})})),s);var x=r(2358);let AxisBottom=t=>{let{xScale:e,pixelsPerTick:r,height:s}=t,a=e.range(),l=(0,o.useMemo)(()=>{let t=a[1]-a[0];return e.ticks(Math.floor(t/r)).map(t=>({value:t,xOffset:e(t)}))},[e,s]);return(0,n.jsx)(n.Fragment,{children:l.map(t=>{let{value:e,xOffset:r}=t;return(0,n.jsxs)("g",{transform:"translate(".concat(r,", 0)"),shapeRendering:"crispEdges",children:[(0,n.jsx)("line",{y1:10,y2:-s-10,stroke:"var(--text-color)",strokeWidth:.5}),(0,n.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)",fill:"var(--text-color)"},children:e},e)]},e)})})},AxisLeft=t=>{let{yScale:e,pixelsPerTick:r,width:s}=t,a=e.range(),l=(0,o.useMemo)(()=>{let t=a[0]-a[1];return e.ticks(Math.floor(t/r)).map(t=>({value:t,yOffset:e(t)}))},[e]);return(0,n.jsx)(n.Fragment,{children:l.map(t=>{let{value:e,yOffset:r}=t;return(0,n.jsxs)("g",{transform:"translate(0, ".concat(r,")"),shapeRendering:"crispEdges",children:[(0,n.jsx)("line",{x1:-10,x2:s+10,stroke:"var(--text-color)",strokeWidth:.5}),(0,n.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-20px)",fill:"var(--text-color)"},children:e},e)]},e)})})},h={top:60,right:60,bottom:60,left:60};function Scatterplot(t){let{width:e,height:r,data:s}=t,a=e-h.right-h.left,l=r-h.top-h.bottom,i=[x.VV$(s,t=>t.y)-4,x.Fp7(s,t=>t.y)+4],c=[x.VV$(s,t=>t.x)-4,x.Fp7(s,t=>t.x)+4],d=x.BYU().domain(i).range([0,a]),p=x.BYU().domain(c).range([l,0]),f=s.map((t,e)=>(0,n.jsx)("circle",{r:4,cx:d(t.y),cy:p(t.x),opacity:1,stroke:"var(--accent-color)",fill:"var(--accent-color)",fillOpacity:.2,strokeWidth:1},e));return(0,o.useEffect)(()=>{}),(0,n.jsx)("div",{children:(0,n.jsx)("svg",{width:e,height:r,children:(0,n.jsxs)("g",{width:a,height:l,transform:"translate(".concat([h.left,h.top].join(","),")"),children:[(0,n.jsx)(AxisLeft,{yScale:p,pixelsPerTick:20,width:a}),(0,n.jsx)("g",{transform:"translate(0, ".concat(l,")"),children:(0,n.jsx)(AxisBottom,{xScale:d,pixelsPerTick:20,height:l})}),f]})})})}var d=r(8860),p=r.n(d),f={};f.epsilon=10,f.perplexity=30,f.dim=2;var u=new(p()).tSNE(f);function FPGen(){let{ligand:t}=(0,o.useContext)(a.Z),[e,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)(!1),[c,x]=(0,o.useState)(null),[h,d]=(0,o.useState)(0),p=t.length;return((0,o.useEffect)(()=>{let processCompounds=async()=>{try{let n=await initRDKit();x(n);let o=[];for(let e=0;e<p;e++)try{let r=n.get_mol(t[e].canonical_smiles),s=r.get_morgan_fp_as_uint8array(JSON.stringify({radius:2,nBits:2048}));o.push(s);let a=e+1;d(a),null==r||r.delete()}catch(t){console.error(t)}try{let t=new l._(o),e=t.predict(o,{nComponents:2}),s=e.data.map(t=>{let[e,r]=t;return{x:e,y:r}});r(s)}catch(t){console.error("Error:",t)}try{u.initDataDist(o);for(var e=0;e<500;e++)u.step();var s=u.getSolution();console.log(s)}catch(t){console.error("Error:",t)}i(!0)}catch(t){console.log("Do Something About RDKit")}};processCompounds()},[t,p]),s)?(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("br",{}),e&&(0,n.jsx)(Scatterplot,{data:e,width:600,height:600})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["Number of Data Points Processed: ",h]}),(0,n.jsx)("progress",{className:"progress-bar",value:h,max:p})]})}},6447:function(){}}]);